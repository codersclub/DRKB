---
Title: ГЛАВА 3. ЗАПУСК СЕТИ BTRIEVE
Date: 01.01.2007
---

# ГЛАВА 3. ЗАПУСК СЕТИ BTRIEVE

[\(Руководство по Btrieve\)](./)

Эта глава содержит информацию, необходимую для инсталяции и конфигурации
NetWare Btrieve для Вашей системы.

### СИСТЕМНЫЕ ТРЕБОВАНИЯ

NetWare Btrieve должeн запускаться под управлением NetWare v2.1x или
выше. Для обеспечения индивидуальных операций записи на диск и
сохранности файлов и их восстановления в случае сбоя файл-сервера
требуется Система связи транзакций (Transaction Tracking System).

**Важно:**
>Сеть Btrieve не запускается под управлением
>ELS NetWare уровня I или Advanced NetWare 68, т.к.
>эти версии не поддерживают Value-Added Processes

Btrieve требует сетевой файл-сервер с памятью, достаточной для загрузки
сети, BSERVER и BROUTER. В большинстве случаев файл-сервер должен иметь
минимум 2МВ памяти для эффективного запуска и NetWare, и Btrieve.

Программа "Btrieve инициатор запросов" (BREQUEST) требует
приблизительно 25КВ памяти для каждого рабочего места (при допущении,
что она загружена со стандартными режимами запуска). Точное количество
требуемой памяти зависит от заданных Вами режимов запуска при загрузке
программы.

Если Вы используете систему межсетевого обмена, рабочие станции на
вершинах этих сетей, использующие NetWare Btrieve, должны иметь доступ к
файл-серверу, загруженному с BSERVER и BROUTER.

### BTRIEVE-ДИСКЕТЫ

NetWare Btrieve расположен на двух дискетах: дискете с программами
"PROGRAMS" и дискете с утилитами "UTILITES". Вы должны сделать копии
Btrieve-дискет, сохранив дискеты-оригиналы на случай повреждения или
потери копий. Дискеты-оригиналы Btrieve имеют защиту записи, поэтому Вы
не можете случайно уничтожить или
заменить их содержание.

Дискета "PROGRAMS" содержит следующие файлы:

ФАЙЛ | ОПИСАНИЕ
-----|---------
BSERVER.VAP |Файл, загружаемый NetWare как Value-Added Process на файл-сервер
BROUTER.VAP |Программа сообщений Btrieve. Эта программа используется для обеспечения межпроцессорных связей между BSERVER и другими VAP-продуктами, такими как NetWare SQL.
BREQUEST.EXE |Btrieve инициатор запросов для рабочих станции DOS. Это резидентная в памяти программа, загружаемая Вами на каждую рабочую станцию, делающую Btrieve-запросы. BREQUEST пересылает Btrieve-запросы из Вашей  прикладной программы на файл-сервер.
BREQURST.DLL |Btrieve инициатор запросов для рабочих станций OS/2. Это библиотека динамических связей, которую OS/2 связывает с каждой прикладной прграммой Btrieve. Программы BREQUEST пересылают Btrieve-запросы из Вашей прикладной программы в файл-сервер.
BTRCALLS.DLL |Btrieve-подпрограмма динамических связей для рабочих станций OS/2. Эта программа включена для устранения необходимости повторного редактирования связей программ OS/2 специально для NetWare Btrieve.

Дискета "UTILITIES" содержит следующие файлы:

ФАЙЛ | ОПИСАНИЕ
-----|---------
BUTIL.EXE |Автономная утилита Btrieve.
BSETUP.EXE |Утилита конфигурации и инсталяции Btrieve.
BSETUP.HLP |Файл сообщений для программы BSETUP.
BASXBTRV.EXE |Резидентный в памяти BASIC-интерфейс, используемый BASIC-интерпретатором.
BASXBTRV.OBJ |Объектный модуль, содержащий интерфейс IBM Compiled BASIC с Btrieve
QBIXBTRV.OBJ |Объектный модуль, содержащий интерфейс Microsoft QuickBASIC с Btrieve.
PASXBTRV.OBJ |Объектный модуль, содержащий интерфейс Паскаля для IBM (или Microsoft) компилятора Паскаля
TURXBTRV50S |Исходный модуль, содержащий интерфейс Паскаля для компилятора Турбо-Паскаля.
BEXTERN51S |Исходный файл Паскаля, содержащий внешнее объявление для функции BTRV.
COBXBTRV.OBJ |Объектный модуль, содержащий интерфейс Кобола для компилятора Microsoft Cobol, v2.
MSCXBTRV.C |Исходный модуль для интерфейса Microsoft C с Btrieve.
C2XBTRV.C |Исходный модуль интерфейса C, используемый в прикладных задачах OS/2 в защищенном режиме.
C2FXBTRV.C |Исходный модуль интерфейса C, используемый в прикладных задачах OS/2 FAPI, запускаемых или в защищенном режиме или в режиме эмуляции.
UPPER.ALT |Файл, содержащий определение альтернативной последовательности поиска, которая сравнивает клавиши верхнего и нижнего регистра, как будто бы они были все на верхнем регистре.
B.EXE     |Исполнитель Btrieve-функций, тестирующая и обучающая программа.
README.DOC |Документ, описывающий любые изменения или дополнения в Btrieve со времени опубликования руководства.
INTRFACE.DOC |Документ, описывающий интерфейс с языками, поставленный на дискете Btrieve, но не обсуждаемый в данном руководстве.

### КОНФИГУРАЦИЯ И ИНСТАЛЯЦИЯ BTRIEVE

До того, как Ваша прикладная программа сможет иметь доступ к NetWare
Btrieve, Вы должны сперва конфигурировать Btrieve-программы и затем
инсталировать их на файл-сервер.

Файлы BSERVERR.VAP и BROUTER.VAP, включенные на дискету "PROGRAMS",
снабжены стандартными вариантами инициализации. Т.к. эти значения
адекватны для многих систем, возможно, Вам не потребуется их
корректировать. В этой главе обсуждаются варианты конфигурации Btrieve и
объясняется, как применять программу BSETUP.EXE для конфигурации и
инсталяции соответствующих Вашим требованиям версий BSERVER.VAP и
BROUTER.VAP на Вашем файл-сервере.

### РЕЖИМЫ КОНФИГУРАЦИИ BTRIEVE

Для правильного функционирования Btrieve при загрузке должен
зарезервировать память и ресурсы. Вы можете установить в Btrieve
требования для своей системы, задавая набор опций конфигурации. Они
включают:

* Максимальное число открытых файлов.
* Максимальное число обрабатываемых файлов.
* Максимальное число блокировок записей.
* Число парралельных транзакций.
* Максимальный размер буфера сжатия.
* Максимальная длина записи.
* Максимальный размер страницы.
* Максимальное число параллельных сеансов.
* Время задержки обновления консоли.
* Автоматическая установка флагов транзакций.

В разделах на следующих страницах обсуждается каждая опция, заданные по
умолчанию значения и требуемая при необходимости память.

**Максимальное число открытых файлов**

Границы: 1-255  
По умолчанию: 20  
Требуемая память для каждого файла: 115 байт

Опция "Максимальное число открытых файлов" позволяет Вам задать
максимальное число уникальных файлов, которое можно открыть на
файл-сервере в люббое время. Btrieve использует заданное Вами значение
для определения размера внутренних таблиц, используемых для доступа к
активным файлам. Каждый уникальный Btrieve-файл на файл-сервере треббует
один вход.

**Максимальное число обрабатываемых файлов**

Границы: 1-&lt;предел сети\>  
По умолчанию: 60  
Требуемая память для каждого обрабатываемого файла: 114 байт

Опция "Максимальное число обрабатываемых файлов" позволяет Вам задать
максимальное число обрабатываемых файлов, которое Btrieve позволяет
одновременно использовать Вашей системе. Если две станции открывают один
и тот же файл на файл-сервере, они используют два обрабатываемых файла.
Для вычисления максимального числа обрабатываемых файлов умножьте число
станций на максимальное число файлов, которые можно открыть на каждой
рабочей станции.

**Максимальное число блокировок записей**

Границы: 0 - &lt;предел сети\>  
По умолчанию: 20  
Требуемая память для каждой блокировки: 8 байт

Опция "Максимальное число блокированных записей" устанавливает
максимальное число записей, которое может быть заблокировано
одновременно на файл-сервере. Она определяет число входов для таблицы
запретов, которую Btrieve строит при загрузке. Значение этой опции
включает блокировки как единственной так и множества записей. Для
вычисления значения этой опции определите максимальное число записей,
которое можно открыть на каждой рабочей станции, и умножьте это число на
число рабочих станций, имеющих доступ к Btrieve-файлам.

**Число парралельных транзакций**

Границы: 0 - &lt;максимальное число сеансов\>  
По умолчанию: 0  
Требуемая память для каждой транзакции: 1 046 байтов

Опция "Число парралельных транзакций" устанавливает максимальное число
станций, которые могут иметь парралельные активные транзакции на
файл-сервере. Если Вы задаете для этой опции значение равное 0, ни одна
из рабочих станций не может запрашивать операцию Begin Transaction на
файл-сервере. Если Вы задаете для этой опции значение большее 0, Btrieve
создает файл транзакций BTRIEVE.TRN в директории \\SYS\\SYSTEM на
файл-сервере и позволяет Вам использовать столько активных транзакций,
сколько Вы задали.


**Максимальный размер сжатой записи**

Границы: 0 - &lt;самая длинная запись в сжатом файле\>  
По умолчанию: 0  
Требуемая память для каждой транзакции: 2 * число заданных килобайт

Опция "Максимальный размер сжатой записи" задает размер (в килобайтах)
самой длинной записи в сжатом файле, к которой Вы будете иметь доступ.
Btrieve расположит заданное Вами удвоенное число килоайт в свой буфер
сжатия. Задание большего, чем Вам необходимо, значения не приведет к
улучшению выполнения, а может привести к уменьшению памяти, доступной
для других процессов на файл-сервере.

Если Вы используете сжатые файлы, установите значение для этой опции,
равные размеру самой длинной записи в Ваших сжатых файлах. Задавайте
значение в килобайтах. Округляйте все значения до следующего большего
килобайта. Например, если самая длинная запись допускает длину 1 800
байт, задайте значение 2 для этой опции.

Если Вы не используете сжатые файлы, установите значение в 0.


**Максимальная длина записи**

Границы: 4 байта - 32KB  
По умолчанию: 8 912 байт  
Требуемая память: (заданное значение + 269 байт)

Опция "Максимальная допустимая длина записи" задает длину самой
длинной записи, которую допускает прикладная задача Btrieve на этом
файл-сервере. Всегда задавайте длину записи в байтах. Задание большего
значения, чем Вам необходимо, не приводит к улучшению выполнения.

**Максимальный размер страницы**

Границы: 512 - 4 096 байт  
По умолчанию: 4 096 байт  
Требуемая память: нет

Опция "Максимальный допустимый размер страницы" позволяет Btrieve
вычислять размер необходимых кэш-буферов. Значение, что Вы здесь
задаете, должно равняться максимальному размеру страницы Btrieve-файла,
к которому Вы хотите иметь доступ. Оно должно быть кратно 512 байтам, но
не больше чем 4 096 байт.

**Максимальное число параллельных сеансов**

Границы: 1-&lt;число задач на рабочей станции\>  
По умолчанию: 15  
Требуемая память для каждого сеанса: 1 296 байт

Опция "Максимальное число параллельных сеансов" задает максимальное
число задач на рабочей станции, которые могут иметь доступ к BSERVER в
любое время. Сеанс определяется как одна копия связи BREQUEST с
программой BSERVER. Каждый сеанс занимает два пакетных буфера
Btrieve-запросов.

Задание большего значения, чем Вам необходимо, не приводит к улучшению
выполнения.

**Время задержки обновления консоли**

Границы: 1 - 60 секунд  
По умолчанию: 3 секунды  
Требуемая память: нет

Опция "Время задержки обновления консоли" управляет числом секунд
задержки B STATUS и B ACTIVE перед обновлением экрана новой информацией.
Задержка позволяет Вам сохранить читабельность информациии, наблюдая
эффект работы базы данных в режиме реального времени.

**Автоматическая установка флагов транзакций**

Границы: Да/Нет  
По умолчанию: Нет  
Требуемая память: нет

Опция "Автоматическая установка флагов транзакций" управляет
автоматической установкой флагов файлов как допускающих транзакции во
время создания их Вами в системе. Если Вы ответите "Yes" ("Да"),
Btrieve установит флаги транзакций для вновь создаваемых файлов. во
время создания их Вами в системе. Если Вы ответите "No" ("Нет"),
Btrieve не установит флаги транзакций для файлов.


### ОПЦИИ ИНСТАЛЯЦИИ

Программа BSETUP создана для предоставления Вам следующих опций
инсталяции:

* Вы можете инсталировать BSERVER и BROUTER непосредственно на
файл-сервере. В этой ситуациия Вы должны войти в систему как SUPERVISOR
или иметь права супервизора. Если Вы не вошли в сисиему как SUPERVISOR,
опции "Install" и "Remove" не будут отображены в меню.

* Вы можете скопировать файлы BSEVER.VAP и BROUTER.VAP в поддиректорию
или на дискету, запустить BSETUP для конфигурации копии, и затем
инсталировать копию на текущем файл-сервере или переслать файл на другой
файл-сервер.

### ЗАПУСК BSETUP

Для запуска BSETUP выполните следующие шаги:

1. Стартуйте персональный компьютер, который Вы будете использовать для
запуска BSETUP.
2. Скопируйте файлы BSEVER.VAP и BROUTER.VAP в поддиректорию или на
дискету, в зависимости от опций инсталяции.
3. Удостоверьтесь, что текущая директория - поддиректория, на которую Вы
скопировали программы NetWare Btrieve.
4. После подсказки DOS введите следующую команду:

        BSETUP <Enter>

### ПРИМЕНЕНИЕ BSETUP

Когда BSETUP загружен, появится меню подобное следующему:

    Available Options
    Change File Server
    Install Btrieve
    Remove Btrieve
    Save Configuration
    Set Configuration

В следующих разделах обсуждается каждая опция и дается информация об их
применении для конфигурации и инсталяции Btrieve. Опции представлены в
наиболее вероятном порядке выполнения. Если Вам нужна более детальная
помощь по задаче выполняемой в настоящее время, нажмите клавишу F1
(Помощь).

Используйте клавиши Up и Down, чтобы высветить опции меню.
Если Вы хотите выйти из меню, нажмите &lt;Esc\>.

Для выхода из BSETUP нажмите &lt;Esc\> в меню "Available Options" и
высветите "Yes" в меню "Exit BSETUP".

### CHANGE FILE SERVER (Изменение файл-сервера)

Опция "Change File Server" позволяет Вам выбрать файл-сервер, на
котором Вы хотите конфигурировать, инсталировать, удалить или сохранить
NetWare Btrieve.

Для изменения файл-серверов выполните следующие шаги:

1. Используйте клавиши Up и Down, чтобы высветить опцию "Change File
Server" и нажмите &lt;Enter\>.

    Появится меню, перечисляющее имена файл-серверов подключенных
    к рабочей станции в текущее время.

2. Используйте клавиши Up и Down, чтобы высветить имя файл-сервера
   на котором Вы хотите выполнять операцию BSETUP и нажмите
   &lt;Enter\>.

    Будет короткая пауза и вновь появится меню "Available
    Options".

    Если у Вас есть права супервизора на выбранном Вами
    файл-сервере, появятся все опции меню. Вы сможете сейчас
    конфигурировать, инсталировать, удалять или сохранять NetWare
    Btrieve на этом файл-сервере.

Если у Вас нет прав супервизора на выбранном Вами
файл-сервере, опции "Install NetWare Btrieve" и "Remove
NetWare Btrieve" не появятся. Вы сможете только
конфигурировать и сохранять конфигурацию NetWare Btrieve на
файл-сервере, на котором Вы не имеете прав супервизора.

### SET CONFIGURATION (Установка конфигурации)

Опция "Set Configuration" позволяет Вам определять опции Btrieve для
копирования Btrieve в текущую директорию.

**Важно:**

>Если BSERVER.VAP и BROUTER.VAP нет в текущей директории,
>когда Вы пытаетесь установить опции инициализации,
>BSETUP возвратит сообщение об ошибке и прервет выполнение.

Чтобы установить одну или несколько опций инициализации, выполните
следующие шаги:

1. Высветите меню "Set Configuration" в меню "Available Options" и
нажмите &lt;Enter\>.

    Появится меню подобное следующему:

                  Number of open files: 20
                     Number of handles: 60
                       Number of locks: 20
                Number of transactions: 0
        Largest compressed record size: 8192
                     Largest page size: 4096
                    Number of sessions: 15
                 Console refresh count: 3
         Create files as transactional: Yes

    Значения, отображенные в поле правой колонки, - это значения,
    определенные для этой опции в последний раз. Если Вы конфигурируете
    новую копию NetWare Btrieve, в полях появятся значения, заданные по
    умолчанию.

2. Высветите поле, которое Вы хотите задать.

3. Введите новое значение и нажмите &lt;Enter\>.

    Если Вы нажмете &lt;Esc\>, будет действовать предыдущее определение опции.

    Если Вы введете неверное для этой опции значение, BSETUP предупредит Вас
    об ошибке. В этот момент Вы можете удалить неправильное значение и
    ввести верное значение.

4. Продолжайте высвечивать поля и вводить новые значения для всех
опций, что Вы хотите определить.

Когда Вы введете нужные значения, нажмите &lt;Esc\>, чтобы вернуться в
меню " Available Options". Вы должны выполнить опцию "Save
Configuration" для того, чтобы заданные вновь значения были сохранены
в программах NetWare Btrieve в текущей директории.

### SAVE CONFIGURATION (Сохранение конфигурации)

Опция "Save Configuration" позволяет Вам сохранять конфигурацию
Btrieve в копиях BSERVER.VAP и BROUTER.VAP в текущей директории. Вы не
обязаны входить в систему как SUPERVISOR для сохранения новой
конфигурации Btrieve.

Чтобы сохранить новую конфигурацию Btrieve, выполните следующие
шаги:

1. Высветите "Save Configuration" и нажмите &lt;Enter\>.

    Появится подсказка "Update Btrieve".

2. Высветите "Yes" и нажмите &lt;Enter\>.

    Когда Вы сохраните новую конфигурацию, BSETUP установит новые значения
    опций Btrieve в копиях BSERVER.VAP и BROUTER.VAP, хранящихся в текущей
    директории.

    BSETUP вернет Вас в меню "Available Options".

3. Если Вы хотите, чтобы новая конфигурация действовала на текущем
файл-сервере, выполните опцию "Install Btrieve" в меню "Available
Options" и затем перезагрузите сеть.

### INSTALL BTRIEVE (Инсталяция Btrieve)

Опция " Install Btrieve" позволяет Вам инсталировать Btrieve на
файл-сервере, в который Вы вошли в данный момент. Вы должны войти в
систему как SUPERVISOR или иметь права супервизора для инсталяции
Btrieve на файл-сервере.

Для инсталяции Btrieve, выполните следующие шаги:

1. Высветите опцию "Install Btrieve" в меню "Available Options" и
нажмите &lt;Enter\>.

    Если NetWare Bteieve не инсталирован на текущем файл-сервере, появится
    бокс входа, подсказывающий ввести пароль для Btrieve.

    Если NetWare Bteieve уже инсталирован на текущем файл-сервере, появится
    подсказка, спрашивающая хотите ли Вы заменить инсталированные в данное
    время программы. Если - да, то выполните следующие шаги:

    1. Для отмены инсталяции и возврата в меню "Available Options",
    высветите "No" и нажмите &lt;Enter\>, или нажмите &lt;Esc\>.
    2. Для замены существующей конфигурации высветите "Yes" и нажмите
    &lt;Enter\>.

    Если Вы ответите "Yes" на подсказку "Replace Bteieve", появтися бокс
    входа, подсказывающий ввести пароль для Btrieve.

2. NetWare Btrieve требует пароль для идентификации себя в NetWare

    Это предохраняет от получения доступа к NetWare неавторизированных
    программ через объектное имя Btrieve.

    Для отмены инсталяции в этот момент и возврата в меню "Available
    Options" нажмите &lt;Esc\>.

3. Для продолжения инсталяции введите пароль для Btrieve из не болле, чем
восьми символов, и нажмите &lt;Enter\>. Если Вы не хотите задавать пароль,
но хотите продолжить инсталяцию, нажмите &lt;Enter\> при подсказке пароля.
Появится подсказка "Install BROUTER".

    **Важно:**

    >Подсказка пароля - это последний шаг процесса инсталяции,
    >когда Вы можете полностью отменить инсталяцию без инсталяции
    >программ NetWare Btrieve. Если Вы продвинулись немного дальше
    >в этом процессе, Вы должны синсталировать по крайней мере
    >программу BSERVER.

4. Подсказка "Install BROUTER" дает Вам опцию инсталяции программы
BROUTER в то же самое время, что и BSERVER.

    Для инсталяции как BSERVER так и BROUTER высветите "Yes" и нажмите
    &lt;Enter\>. BSETUP будет:

    * Копировать BSERVER.VAP и BROUTER.VAP в директорий SYS\\SYSTEM на
    предпочтительный файл-сервер;
    * Определять программы NetWare Btrieve как объектные в NetWare и
    присваивать BSERVER заданный Вами пароль. (BROUTER не требует пароля).

    Для инсталяции только BSERVER высветите "No" и нажмите &lt;Enter\>.
    BSETUP будет:

    * Копировать BSERVER.VAP в директорий SYS\\SYSTEM на предпочтительный
    файл-сервер;

    * Определять BSERVER как объектный в NetWare и присваивать заданный
    Вами пароль.

    Не инсталируйте BROUTER, если Вы не используете другой VAP для
    Btrieve-обращений (такой как NetWare SQL).

5. После того, как Вы инсталировали новые Btrieve программы на
файл-сервере, Вы должны перезапустить файл-сервер для того, чтобы
действовала новая конфигурация.

### REMOVE BTRIEVE (Удаление Btrieve)

Опция "Remove Btrieve" удаляет Btrieve программы с файл-сервера,
на котором Вы зарегестрированы в данное время. Как только Вы выполнили
эту опцию, Btrieve VAP уже не будут загружены на этом файл-сервере. Вы
должны быть зарегистрированы как SUPERVISOR или обладать правами
супервизора для удаления Btrieve с файл-сервера.

Для удаления Btrieve с файл-сервера, выполните следующие шаги:

1. Высветите опцию "Remove Btrieve" и нажмите &lt;Enter\>.

    Появится подсказка "Remove Btrieve".

2. Высветите "Yes" и нажмите &lt;Enter\>.

    Когда Вы выберете эту опцию, BSETUP будет:

    * Удалять BSERVER.VAP (и BROUTER.VAP, если он инсталирован) из
    директория SYS:SYSTEM на предпочтительном файл-сервере:

    * Удалять объектное имя Btrieve и пароль из сети.

**Важно:**

>Если NetWare SQL определен как объектный модуль в программе
>связей Btrieve, BSETUP не удалит програмные файлы NetWare
>Btrieve. Вы должны удалить програмные файлы NetWare SQL с
>файл-сервера для того, чтобы суметь удалить програмные файлы
>NetWare Btrieve. См. Главу 3 "NetWare SQL User\'s Manual" для
>дополнительной информации.
       
### ОСТАНОВКА BTRIEVE VAPS

Как только BSERVER и BROUTER активизированы, они остаются резидентными в
памяти файл-сервера в течении всего времени работы операционной системы
NetWare. Вы не можете удалить их из памяти файл-сервера, если сначала не
удалите их с файл-сервера, применяя утилиту BSETUP (см. "REMOVE
BTRIEVE" на предыдущих страницах) и затем не перезапустите операционную
систему.

Когда Вы запрашиваете команду DOWN на файл-сервере, BSERVER выполняет
переустановку всех активных связей сети, имеющих доступ к файлам на
файл-сервере.

### ПРОГРАММА BREQUEST

(BROUTER не требует пароля). NetWare Btrieve имеет программы BREQUEST
для рабочих станций как DOS так и OS/2. В этом разделе описаны опции
запуска BREQUEST и инструкции для запуска BREQUEST в обеих средах.

#### ОПЦИИ ЗАПУСКА BREQUEST

Этот раздел описывает опции запуска BREQUEST и значения, которые Вы
можете им присваивать.

**[/R:распределеные накопители]**

Опция /R указывает максимальное число распределеных накопителей, к
которым имеет доступ рабочая станция. Когда Вы опускаете эту опцию,
BREQUEST использует значение по умолчанию равное трем. Каждый заданный
Вами накопитель увеличивает размер резидентной памяти BREQUEST на 20
байт. Например, если рабочая станция имеет пять распределенных
накопителей, задайте опцию /R следующим образом:

    /R:5

**[/D:длина передаваемых данных]**

Опция /D задает длину самой длинной записи, к которой Вы имеете доступ
через Btrieve. BREQUEST использует задаваемое Вами здесь значение для
вычисления длины буфера передаваемых данных, который он резервирует для
передачи данных между BSERVER и Вашей прикладной программой. Значение
вводимое здесь должно быть равно максимальной длине записи, что вы
конфигурируете для Btrieve через программу BSETUP. См. раздел
"Максимальная длина записи" в этой главе.

Значение по умолчанию для опции /D равно 2048 байт. Максимальная длина
записи, что Вы можете задать, равна 32KB. Задавая большее значение, Вы
не достигнете улучшения выполнения.

BREQUEST поддерживает две копии буфера передаваемых данных. Опция /D
увеличивает размер резидентной памяти BREQUEST на удвоенное число
заданных Вами байт плюс 538 байт.

Всегда задавайте длину записи в байтах. Например, если самая длинная
запись, используемая Вашей программой, имеет длину 3000 байт, задайте
опцию /D следующим образом:

    /D:3000

**[/S:число файл-серверов]**

Опция /S задает число файл-серверов, к которым может обратиться рабочая
станция. Значение по умолчанию для опции /S равно единице максимальное
допустимое значение равно восьми. Например, если рабочая станция имеет
накопители, расположенные на трех файл-серверах, задайте опцию /S
следующим образом:

    /S:3

## BREQUEST ДЛЯ РАБОЧИХ СТАНЦИЙ DOS

Вы должны стартовать программу BREQUEST на рабочей станции до того, как
рабочая станция сможет иметь доступ к файлам сети Btrieve через
BSERVER.VAP Если вы хотите иметь доступ к локальным файлам на рабочей
станции, Вы должны загрузить копию Btrieve Record Manager (или Single
User или DOS 3.1 Network) до загрузки BREQUEST.

Стартуйте BREQUEST на рабочей станции, выполнив следующую команду:

    <Накопитель>BREQUEST[/R:число распределенных накопителей]
            [/D:длина передаваемых данных]
            [/S:число файл-серверов]

Замените &lt;Накопитель\> именем накопителя, на котором хранится BREQUEST.
Вы можете опустить имя накопителя, если BREQUEST хранится на накопителе,
заданном по умолчанию, или если BREQUEST расположен в директории Вашего
пути поиска.

Опции запуска BREQUEST описаны на предыдущих страницах.

Например, для задания 4 распределенных накопителей, длины передаваемых
данных равной 2048 байт и 2 файл-серверов, применяйте следующую команду:

    BREQUEST /R:4 /D:2048 /S:2

Для уверенности, что опции запуска всегда загружены, поместите команду
BREQUEST в файл AUTOEXEC.BAT на рабочей станции

    BREQUEST ДЛЯ РАБОЧИХ СТАНЦИЙ OS/2

BREQUEST.DLL и BTRCALLS.DLL,прграммы динамических связей Btrieve, должны
быть инсталированы на раочей станции до того, как рабочая станция сможет
иметь доступ к файлам сети Btrieve через BSERVER.VAP. Когда стартует
первая прикладная программа Btrieve, OS/2 загружается автоматически.

### Инсталяция BREQUEST

Для инсталяции BREQUEST для OS/2 скопируйте файлы BREQUEST.DLL и
BTRCALLS.DLL с дискеты в:

* Один из директорий, заданных в команде LIBPATH в файле CONFIG.SYS
* Корневой директорий загрузочного драйва OS/2.

См. руководство по OS/2 для дополнительной информации о LIBPATH
и об определении размещения библиотек динамических связей.

**Важно:**

>BREQUEST.DLL и BTRCALLS.DLL,прграммы динамических связей,
>поставляемые с NetWare Btrieve, позволяют иметь доступ только
>к перемещаемым файлам. Прикладная программа на рабочей станции
>OS/2 не может иметь доступ к локальным файлам с помощью этих
>программ.


### Инициализация BREQUEST

Вы можете задать опции инициализации, специфические для каждой
прикладной программы Btrieve, запускаемой на рабочей станции. BREQUEST
использует переменную среды OS/2 REQPARMS для определения опций
инициализации, необходимых прикладной программе. Опции инициализации
BREQUEST описаны на предыдущих страницах этой главы в разделе "Опции
запуска BREQUEST".

Установите опции инициализации BREQUEST, применяя следующую команду
среды:

    SET REQPARMS=[/R:число распределенных накопителей]
                 [/D:длина передаваемых данных]
                 [/S:число файл-серверов]

Не делайте пробелов между именем переменной REQPARMS и знаком равенства.
Вы можете вставлять пробелы между задаваемыми Вами опциями
инициализации.

Например, задавайте 4 распределенных накопителя, длину передаваемых
данных в 2048 байт и 2 файл-сервера, применяя следующую команду:

    SET REQPARMS=/R:4/D:2048/S:2

Для уверенности, что опции запуска всегда загружены, поместите команду
SET REQPARMS в один из специальных загрузочных файлов инициализации,
применяемых для OS/2.

### ОСТАНОВКА BREQUEST

НА РАБОЧЕЙ СТАНЦИИ DOS существует два метода для удаления BREQUEST из
памяти:

* Ваша прикладная программа может запросить операцию Stop
(Btrieve-операция 25).
* Вы можете запросить команду BUTIL\_STOP из командной строки рабочей
станции

НА РАБОЧЕЙ СТАНЦИИ OS/2 операционная система удаляет программы
динамических связей из памяти, когда завершена последняя прикладная
программа Btrieve. Вы не можете удалить программы динамических связей из
памяти, пока активна какая-либо прикладная программа Btrieve, т.к.
операционная система динамически связывает их с прикладной программой при
ее загрузке.

