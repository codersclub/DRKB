---
Title: Реляционные базы данных
Date: 01.01.2007
---


Реляционные базы данных
=======================

::: {.date}
01.01.2007
:::

Итак, Реляционная база данных упрощённо является набором таблиц. Таблица
же есть основной строительный кирпичик базы данных. Расмотрим структуру
таблицы. Для начала представте себе таблицу, например в Word...

Что в ней есть?

Во-первых есть строки и колонки (raw and columns). В базах данных, в
отличие от Word есть строгие ограничения на их содержимое, да и
терминология немного другая:

1) Колонка называется тоже columns, но чаще употребляется понятие
"поле" (field). Колонка всегда имеет имя (по которому ее можно найти)
и обязана хранить данные только одного какого-либо типа - например целые
числа, строки, дату/время и т.п. Создавая таблицу вы обязаны указать
какой тип имеет каждое поле, другими словами, вы заранее должны
определится, какого сорта данные будут хранится в колонке. Например, вот
примерно так может выглядеть структура таблицы для хранения данных об
участнике этого форума:

  --- ----------------------------
  ·   Ник - строка (25 символов)
  --- ----------------------------

  --- -----------------------------
  ·   ФИО - строка (250 символов)
  --- -----------------------------

  --- -------------------------------
  ·   Дата регистрации - Дата/время
  --- -------------------------------

  --- ------------------------------
  ·   Количество постингов - Целое
  --- ------------------------------

  --- -------------------------------
  ·   Показывать email - True/False
  --- -------------------------------

Обратите внимание что для строк я указал конкретную длину, а для
остальных ничего не указывал. Зачем? Ответ прост - каждая строка должна
занимать строго одинаковое место (об исключениях потом), и это сделано
для быстроты поиска. Действительно, если бы каждая строка имела разную
длину, то чтобы найти например 1000 строку, надо было бы перечитать все
999 предыдущих строк, но если известно, что каждая строка занимает
например 1Кб, то чтобы прочитать 1000 строку достаточно прочитать 1 Кб с
999Кб... Другая сторона этого - например мне надо сравнить даты в
приведенной выше таблице - сделать это просто - я точно знаю что первую
дату можно прочитать с 276 байта, и так же точно я знаю точные
координаты каждой даты. Именно в этом и лежит одна из сторон высокой
скорости работы баз данных (другие способы ускорения работы рассмотрим
позже).

2) Строка - в базах данных имеет специфическое название - запись
(Record) - к Дельфийскому типу Record этот термин не имеет никакого
отношения. Хотя большинство БД дают возможность перейти и прочитать
например 10 запись, надо с самого начала попытаться никогда этим не
пользоваться. Почему? Да просто потому что БД практически всегда
подразумевают совместный доступ нескольких пользователей к одним и тем
же данным, и если Вы хотите перейти на 10 запись, а другой пользователь
в это время удалит запись номер 5, то вы перейдёте вовсе не на ту запись
что ожидалось. А как же быть? У вас есть 2 способа - либо вы находите
нужную запись по значению поля - например для нашей таблицы это будет
выглядеть примерно так:

"Найти пользователя [Вася] в первой колонке"

В результате вы получите доступ ко всем полям записи для "Васи". Либо
вы берёте все записи и перебираете их в цикле пока не найдёте нужный -
это гораздо худший способ, так как работает на 2-3 порядка медленнее и
имеет другие неприятные последствия (об этом позже), но он возможен и
иногда применяется.
