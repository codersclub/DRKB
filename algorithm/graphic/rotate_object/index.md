---
Title: Вращение объектов
Author: Айткулов Павел
Date: 01.01.2007
---


Вращение объектов
=================

::: {.date}
01.01.2007
:::

Здесь я бы хотел рассказать не о том, как работать с DelphiX, OpenGL или
Direct, а о том, как можно вращать многогранники с помощью простых
действий: moveto и lineto.

Здесь рассмотрим пример вращения куба. Будем рисовать на Canvase
(например Listbox). Сначала нарисуем врашающийся квадрат (точнее 2
квадрата и соединим их). Пусть q - угол поворота квадрата, который мы
рисуем. Очевидно, что нам надо задать координаты вершин квадрата -
a:array [1..5,1..2] of integer. 1..4+1 - количество вершин квадрата
(почему +1 будет объяснено позже). 1..2 - координата по X и Y. Кто
учился в школе, наверное помнит, что уравнение окружности:
X\^2+Y\^2=R\^2, кто хорошо учился в школе, возможно вспомнит уравнение
эллипса: (X\^2)/(a\^2)+ (Y\^2)/(b\^2)=1. Но это нам не надо. Нам
понадобится уравнение эллипса в полярных координатах: x=a*sin(t);
y=a*cos(t);t=0..2*PI; (учащиеся университетов и институтов ликуют).

С помощью данного уравнения мы заполняем массив с координатами.

    for i:=1 to 5 do
    begin
      // координата по Х; q+i*pi/2 - угол поворота
      // i-той вершины квадрата.
      a[i,1]:=trunc(80*sin(q+i*pi/2));
      // координата по Y; знак минус - потому что координаты
      // считаются с верхнего левого угла
      a[i,1]:=trunc(-30*cos(q+i*pi/2));
    end;
     

Сейчас будем рисовать квадрат:

    for i:=1 to 4 do
    begin
      moveto(100+a[i,1],50+a[i,2]); //Встаем на i-ую точку квадрата.
      lineto(100+a[i+1,1],50+a[i+1,2]); //Рисуем линию к i+1-ой точке.

Вот почему array[1..5,1..2], иначе - выход за границы. end;

Затем рисуем второй такой же квадрат, но пониже (или повыше). Соединяем
линиями первый со вторым:

    for i:=1 to 4 do
    begin
      moveto(100+a[i,1],50+a[i,2]);
      lineto(100+a[i,1],130+a[i,2]);
    end;

Осталось очистить Listbox, увеличить q и сделать сначала. Все!!!

Можно также скрывать невидимые линии - когда q находится в определенном
интервале. Также можно поизвращаться: повернуть куб в другой плоскости -
поворот осей(для тех, кто знает формулу).

Автор: Айткулов Павел

WEB-сайт: http://rax.ru/click?apg67108864.narod.ru/

Взято с <https://delphiworld.narod.ru>
