---
Title: Что из себя представляет Self?
Author: Vit
Date: 01.01.2007
---


Что из себя представляет Self?
==============================

::: {.date}
01.01.2007
:::

Self - это явное задание экземпляра класса в его методе.

Например для твоей формы это указание на саму форму:

    procedure TForm1.Button1Click(Sender: TObject);
    begin
      showmessage(self.classname+#13#10+self.name);
    end;

Если например это MDI форма то это будет указатель именно на тот
экземпляр для которого выполняется этот код. На практике Self обычно
применяется при написании своих классов, когда ты пишешь класс или
компонент, то у тебя нет переменной с экземпляром этого компонента,
следовательно чтобы обратится к экземпляру (который появится только в
коде конечного пользователя, который будет использовать компонент)
класса нужна переменная - вот она и берётся за self.

Автор: Vit

Взято с Vingrad.ru <https://forum.vingrad.ru>

------------------------------------------------------------------------

Чтобы понять, что такое self надо понять что такое метод класса. Метод
класса - это просто функция(процедура) который имеет дополнительный
неявный параметр - указатель на экземпляр класса. То есть:

    TMy=class
      x:integer;
      procedure Proc(val:integer);
    end;
     
    procedure TMy.Proc(val:integer);
    begin
      x:=val;
    end;

После компиляции это будет практически то же самое, что:

    procedure Proc(self:TMy;val:integer);
    begin
      self.x:=val;
    end;

То есть на самом деле в методе Proc обращаясь к x мы на самом деле
обращаемся к self.x, просто переменная self опускается. В
откомпилированном коде нет такого понятия как классы - есть только код и
память. Все методы классов превращаются в обыкновенные функции, в
которым качестве первого параметра передается указатель на область
памяти где лежит созданный пользователем экземпляр класса, который они и
используют для чтения или записи(а так же для вызова) того, что мы
называем членами класса.

    var
      m1,m2:TMy;
    begin
      .....
      m1.Proc(4); // -> Proc(m1,4)
      m2.Proc(4); // -> Proc(m2,4)
    end;

Автор: Fantasist

Взято с Vingrad.ru <https://forum.vingrad.ru>
